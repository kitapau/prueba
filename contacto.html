<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <!-- TIPOGRAFÍAS -->
    <!-- Link google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- tipografía SourseSans3 para los parrafos -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <!-- tipografía Raleway para los títulos -->
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <!-- tipografía Lato para los subtítulos -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
   

    <!-- ÍCONOS -->
    <!-- <ícono hamburguesa> -->
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.3.0/uicons-brands/css/uicons-brands.css'>
    <!-- <ícono redes> -->
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.3.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
    <link rel="shortcut icon" href=img/favicon/favicon-sanguche.ico >


    <!-- FAVICON -->
    <link rel="shortcut icon" href="img/icon/favicon.ico" >
    <link rel="icon" href="img/icon/favicon-32x32.png">
    <link rel="icon" href="img/icon/android-icon-192x192.png">
    <meta name="msapplication-TileImage" content="icon/ms-icon-270x270.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/icon/apple-icon-180x180.png">


    <!-- CSS -->
    <link rel="stylesheet" href="css/configuracion-texto.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/footer.css">

    <title>favicon prueba</title>

</head>

<body> 
    <div id="contenedorPagina">
        <!-- HAMBURGUESA -->
        <header id="sv_header_principal">
            <nav>
                <a id="sv_inicio_link" href="index.html">
                    <img src="img/logos/logo-miniblanco.png" alt="imagenLogo">
                </a>

                <input type="checkbox" id="sv_sidebar_active">
                <div id="sv_hamburg">
                    <label for="sv_sidebar_active" id="sv_open_sidebar_button">
                        <svg xmlns="http://www.w3.org/2000/svg" 
                            width="28" 
                            height="28" 
                            fill="currentColor" 
                            class="bi bi-list" 
                            viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
                        </svg>
                    </label>
                </div>

                <div id="sv_link_container">
                    <a href="productos.html">Productos</a>
                    <a href="locales.html">Locales</a>
                    <a href="contacto.html">Contacto</a>
                </div>
            </nav>
        </header>

        <form class="cuerpo" name="contacto">

            <h1 class="titulo1">CONTACTO</h1>
            <h2 class="subtitulo1">¿Cómo fue tu experiencia en <span class="negrita">San Vochitos</span>?</h2>
            <br>
            
            Nombre/s 
            <br>
            <input type="text" name="nombre" size="30" maxlength="100"> 
            <p class="textoError" id="textoNombre"> </p>
            <br>

            Apellido/s 
            <br>
            <input type="text" name="apellido" size="30" maxlength="100"> 
            <p class="textoError" id="textoApellido"> </p>
            <br>

            Correo electrónico 
            <br>
            <input type="email" name="correo" size="25" maxlength="256"> 
            <p class="textoError" id="textoCorreo"> </p>
            <br>

            Teléfono 
            <br>
            <input type="tel" name="telefono" size="20" maxlength="12"> 
            <p class="textoError" id="textoTelefono"> </p>
            <br>

            Sucursal
            <br>
            
            <code translate="no">
            <select name="sucursal">
                <option value="Elegir">Elegir
                <option value="sucursal1">Villa del parque
                <option value="sucursal2">Núñez
                <option value="sucursal3">La Paternal
                <option value="sucursal4">Palermo
            </select>
            </code> 
            
            <p class="textoError" id="textoSucursal"> </p>
            <br>

            Fecha 
            <br>
            <input type="date" name="fecha" id="fecha" min="2024-01-01" max="2024-12-31" >
            <p class="textoError" id="textoFecha"> </p>
            <br>

            Horario 
            <br>
            <select name="horario">
                <option value="Elegir">Elegir
                <option value="horario1">Mañana
                <option value="horario2">Tarde
                <option value="horario3">Noche
            </select> 
            <p class="textoError" id="textoHorario"> </p>
            <br>

            Mensaje 
            <br>
            <textarea name="mensaje" cols="40" rows="10" onkeyup="countChars(this);"></textarea>
            <p class="textoError" id="textoMensaje"> </p>
            <br>

            Adjuntar una foto    
            <input type="file" name= "foto" id="foto" accept="image/*">
            <br>
            <p class="textoError" id="textoImagen"> </p>
            <br>
            <br>

            <input type="checkbox" name="info" checked> Acepto recibir información sobre las novedades y promociones de San Vochitos
            <br>

            <input type="checkbox" name="terminos" id="terminos"> Términos y Condiciones
            <br>
            <p class="textoError" id="textoTerminos"> </p>
            <br> 

            <input type="submit" id="btn" name="btn" value="Enviar">
            <br>

            <input type="Reset" value="Borrar"> 
            <br> 
            <br> 
            <br> 
            <br> 
            <br> 
        </form>

        <!-- PIE DE PAGINA -->
        <footer class="piePagina">

            <a href="index.html"><img class="imagenlogofooter" src="img/logos/logo-verde.png" alt="Logo San Vochitos"></a>
            
            <div class="seccion-derecha">
            <p class="redesSociales">
                <a href="https://www.instagram.com/"><i class="redes fi fi-brands-instagram"></i></a>
                <a href="https://www.facebook.com/"><i class="redes fi fi-brands-facebook"></i></a>
                <a href="https://twitter.com/"><i class="redes fi fi-brands-twitter-alt-circle"></i></a>
            </p>
            </div>

            <div class="seccion-izquierda">  
            <ul>
                <li class="liPaginasFooter"> <a class="linkFooter" href="index.html">Inicio</a> </li>
                <li class="liPaginasFooter"> <a class="linkFooter" href="productos.html">Productos</a> </li>
                <li class="liPaginasFooter"> <a class="linkFooter" href="locales.html">Locales</a> </li>
                <li class="liPaginasFooter"> <a class="linkFooter" href="contacto.html">Contacto</a> </li>
            </ul>
            </div>


            <p class="derechos">Todos los derechos reservados © 2023</p>

        </footer>   
    </div>

    <script>
        //CONTADOR DE CARACTÉRES
        function countChars(obj){
            var maxLength = 150;
            var strLength = obj.value.length;
            var charRemain = (maxLength - strLength);
            
            if(charRemain < 0){
                document.getElementById("textoMensaje").innerHTML = '<span>Estás excedido del límite de '+maxLength+' caracteres</span>';
            }else{
                document.getElementById("textoMensaje").innerHTML = charRemain+' caracteres restantes';
            }
        }

        //FECHA MÁXIMA
        let hoy = new Date();
        let dd = hoy.getDate();
        let mm = hoy.getMonth() + 1; //January is 0!
        let yyyy = hoy.getFullYear();
        if (dd < 10) {dd = '0' + dd}
        if (mm < 10) { mm = '0' + mm}
        hoy = yyyy + '-' + mm + '-' + dd;
        minimo = "2024-01-01";
        let fecha = document.getElementById("fecha");
        fecha.max = hoy;
        fecha.min = minimo;
        
        //LUEGO DE PRESIONAR ENVIAR
        (function(){
            var contacto = document.getElementsByName('contacto')[0],
            boton = document.getElementById('btn');

            var validarNombre = function(e){
                if (document.contacto.nombre.value == 0){
                    document.getElementById("textoNombre").innerHTML = '<span>Ingrese su nombre</span>';
                    e.preventDefault();
                } else {
                    document.getElementById("textoNombre").innerHTML = ' ';
                }
            }

            var validarApellido = function(e){
                if (document.contacto.apellido.value == 0){
                    document.getElementById("textoApellido").innerHTML = '<span">Ingrese su apellido</span>';
                    e.preventDefault();
                    error=error+1
                } else {
                    document.getElementById("textoApellido").innerHTML = ' ';
                }
            }

            var validarCorreo = function(e){
                if (document.contacto.correo.value == 0){
                    document.getElementById("textoCorreo").innerHTML = '<span>Ingrese su correo electrónico</span>';
                    e.preventDefault();
                    error=error+1
                } else {
                    document.getElementById("textoCorreo").innerHTML = ' ';
                }
            }

            var validarTelefono = function(e){
                telefono = document.contacto.telefono.value

                if (telefono.length == 0) {
                    document.getElementById("textoTelefono").innerHTML = '<span>Ingrese su número de teléfono</span>';
                    e.preventDefault();
                    error=error+1

                }else{
                    telefonoNumero = validarNumero(telefono)

                    if (telefonoNumero == "") {
                        document.getElementById("textoTelefono").innerHTML = '<span>Introduzca un número de teléfono, sin signos ni espacios</span>';
                        e.preventDefault();
                        error=error+1

                    } else {
                        if (telefono.length < 10) {
                            document.getElementById("textoTelefono").innerHTML = '<span>El número de teléfono introducido no es valido</span>';
                            e.preventDefault();
                            error=error+1
                        }else{
                            document.getElementById("textoTelefono").innerHTML = ' ';
                        }
                    }

                    function validarNumero(valor) {
                        if (isNaN(valor)) {
                            return ""
                        } else {          
                            return valor
                        }
                    }
                }
            } 

            var validarSucursal = function(e){
                if (document.contacto.sucursal.selectedIndex == 0) {
                    document.getElementById("textoSucursal").innerHTML = '<span>Seleccione una sucursal</span>';
                    e.preventDefault();
                    error=error+1
                } else {
                    document.getElementById("textoSucursal").innerHTML = ' ';
                }
            }
            
            var validarFecha = function (e){
                if (document.contacto.fecha.value == 0){
                    document.getElementById("textoFecha").innerHTML = '<span>Ingrese una fecha</span>';
                    e.preventDefault();
                    error=error+1
                } else {
                    document.getElementById("textoFecha").innerHTML = ' ';
                }
            }

            var  validarHorario = function(e){
                if (document.contacto.horario.selectedIndex == 0) {
                    document.getElementById("textoHorario").innerHTML = '<span>Seleccione un horario</span>';
                    e.preventDefault();
                    error=error+1
                } else {
                    document.getElementById("textoHorario").innerHTML = ' ';
                }
            }
            
            var validarMensaje = function (e){
                objetoTextarea=document.contacto.mensaje
                maxLength=150
                
                if(objetoTextarea.value.length==0) {
                    document.getElementById("textoMensaje").innerHTML = '<span>Escriba un mensaje</span>';
                    e.preventDefault();
                    error=error+1
                }  else {
                    if(objetoTextarea.value.length > maxLength) { 
                        objetoTextarea.value = objetoTextarea.value.substr(0,maxLength); 
                        document.getElementById("textoMensaje").innerHTML = '<span>Se ha sobrepasado la longitud máxima permitida para el texto</span>';
                        e.preventDefault();
                        error=error+1
                    }else{
                        document.getElementById("textoMensaje").innerHTML = ' ';
                    }
                }
            }

            var validarImagen = function (e){
                let archivo = document.getElementById('foto').files[0];
                let tiposPermitidos = ['image/jpeg', 'image/png'];
                let tamañoMaximo = 2 * 1024 * 1024; // 2MB

                if (contacto.foto.value==0) {
                    document.getElementById("textoImagen").innerHTML = '<span>Adjunte una foto</span>';
                    e.preventDefault();
                    error=error+1
                } else {
                    if (!tiposPermitidos.includes(archivo.type)) {
                        document.getElementById("textoImagen").innerHTML = '<span>Tipo de archivo no permitido. Por favor, sube una imagen JPEG o PNG.</span>';
                        e.preventDefault();
                        error=error+1
                    } else {
                        if (archivo.size > tamañoMaximo) {
                            document.getElementById("textoImagen").innerHTML = '<span>La imagen es demasiado grande. El tamaño máximo permitido es 2MB.</span>';
                            e.preventDefault();
                            error=error+1
                        } else{
                            document.getElementById("textoImagen").innerHTML = ' ';
                        }
                    }
                }
            }
            
            var validarTerminos = function(e){
                if (document.contacto.terminos.checked == false){
                    document.getElementById("textoTerminos").innerHTML = '<span>Acepte los términos y condiciones.</span>';
                    e.preventDefault();
                    error=error+1
                } else {
                    document.getElementById("textoTerminos").innerHTML = ' ';
                }
            }
            
            //esto es el que activa todos los validar despues de apretar enviar
            var validar = function(e){
                error=0
                validarNombre(e);
                validarApellido(e);
                validarCorreo(e);
                validarTelefono(e);
                validarSucursal(e);
                validarFecha(e);
                validarHorario(e);
                validarMensaje(e);
                validarImagen(e);
                validarTerminos(e);   
                if (error==0){alert("¡Gracias por completar el formulario!") } 
            }
            
            contacto.addEventListener("submit", validar);
        }())

    </script>
</body>
</html>